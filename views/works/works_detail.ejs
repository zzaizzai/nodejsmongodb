<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />
    <title>Document</title>
  </head>
  <body>
    <%- include('./../components/navbar.ejs') %>
    <div class="container mx-2">
      <h4>Detail</h4>
      <div>Ttile: <span id="title"><%= work.title %></span></div>
      <div>Due Date: <span id="due"><%= work.due_date %></span></div>
      <div>
        Create datetime: <span id="due"><%= work.create_datetime %></span>
      </div>
      <div>user id: <span id="user-id"><%= work.user_id %></span></div>
      <div>text: <span id="user-id"><%= work.work_text %></span></div>
      <div>user name: <span id="user-name"></span></div>
      <div>Department: <span id="user-department"></span></div>
      <button onclick="location.href ='/works/<%= work._id %>/edit'">
        Edit
      </button>
    </div>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script>
      $.ajax({
        method: "get",
        url: `/users/data/${$("#user-id").html()}`,
      }).done((result) => {
        console.log(result);
        user = result.user;
        $("#user-name").text(user.user_name);
        $("#user-department").text(user.department);
      });
    </script>
  </body>
</html>
